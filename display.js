var y=Object.defineProperty;var m=(n,t,s)=>t in n?y(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var c=(n,t,s)=>(m(n,typeof t!="symbol"?t+"":t,s),s);const L=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerpolicy&&(e.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?e.credentials="include":o.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(o){if(o.ep)return;o.ep=!0;const e=s(o);fetch(o.href,e)}};L();const h=n=>({opportunityId:n.opportunity_id,html:n.html}),g=n=>({adDisplays:n.ad_displays.map(h)});class O{constructor(t){c(this,"baseURL");this.baseURL=t}async visitWebPage(t){const s=new URL("/display-api/visit-web-page",this.baseURL),r=new URLSearchParams(t.map(i=>["id",i]).concat([["url",document.location.href]])),e=await(await fetch(s.href+"?"+r.toString())).json();return g(e)}}const l="data-polis-network-id",d="https://api.polisnetwork.io",u="0.0.5-17",p=async()=>{console.debug(`Setup PolisNetwork Display library version=${u}, api_endpoint=${d}`);const n=Array.from(document.querySelectorAll(`div[${l}]`)),t=n.map(e=>e.getAttribute(l));if(!t.length)return;const r=await new O(d).visitWebPage(t),o=Object.fromEntries(r.adDisplays.map(e=>[e.opportunityId,e]));for(let e=0;e<n.length;++e){const i=n[e],f=t[e],a=o[f];a!==void 0&&(i.innerHTML=a.html)}};document.readyState!=="loading"?p():document.addEventListener("DOMContentLoaded",p);window.POLIS_NETWORK_JS_LIB_VERSION=u;
